<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ™‹â€â™€ï¸íšŒì›ê°€ì… í˜ì´ì§€</title>
    <link href="css/style_join.css" rel="stylesheet" type ="text/css">
    <script src="js/jquery-3.6.0.js"></script>
</head>
<body>
  <header>
      <div id="header">
          <!-- ìƒë‹¨ ë¡œê³ ë‚˜ ì œëª© ë¶€ë¶„ -->
          <h2>íšŒì›ê°€ì…</h2>
          <a href="manager.html">ê´€ë¦¬ì</a>
      </div>
  </header>

  <form name="joinFrm" action="javascript:saveMember();">
    <div id="content">
    <!-- íšŒì›ê°€ì… ë‚´ìš© ì‘ì„± ë¶€ë¶„ -->
        <!-- id -->
        <div id="id">
            <h3 class="join_title"><label for="id">ì•„ì´ë””</label></h3>
            <span class="box int_id">
                <input type="text" id="join_id" class="int">
                <span class="email_tail">@member.com</span>
            </span>
            <!-- <span class="error_next_box"></span> -->
        </div>
        <!-- password -->
        <div>
            <h3 class="join_title"><label for="pw">ë¹„ë°€ë²ˆí˜¸</label></h3>
            <span>8~12 ìë¦¬ë¡œ ìˆ«ì, ì˜ë¬¸ì, íŠ¹ìˆ˜ë¬¸ì(!&/\*@)ë¥¼ ëª¨ë‘ í¬í•¨í•˜ì‹œì˜¤.</span>
            <span class="box int_pass">
                <input type="text" id="pw" class="int">
                <span id="alertTxt">ì‚¬ìš©ë¶ˆê°€</span>
                <img src="images/member/notpass.png" id="pswd1_img1" class="pswdImg">
            </span>
            <span class="error_next_box"></span>
        </div>
        <!-- pw í™•ì¸-->
        <div id="checkpw">
            <h3 class="join_title"><label for="check_pw">ë¹„ë°€ë²ˆí˜¸ í™•ì¸</label></h3>
            <span class="box int_pass_check">
                <input type="text" id="check_pw" class="int">
                <img src="images/member/cknotpass.png" id="pswd2_img1" class="pswdImg">
            </span>
            <span class="error_next_box" id="notSamePw">ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</span>
        </div>
        <!-- pw í™•ì¸ ì§ˆë¬¸ -->
        <div id="pw_hint">
            <h3 class="join_title"><label for="check_pw">ë¹„ë°€ë²ˆí˜¸ í™•ì¸ ì§ˆë¬¸</label></h3>
                <span class="box">
                    <select class="sel hint" id="pwhint">
                        <option value="hint_01">ê¸°ì–µì— ë‚¨ëŠ” ì¶”ì–µì˜ ì¥ì†ŒëŠ”?</option>
                        <option value="hint_02">ìì‹ ì˜ ì¸ìƒ ì¢Œìš°ëª…ì€?</option>
                        <option value="hint_03">ìì‹ ì˜ ë³´ë¬¼ ì œ 1í˜¸ëŠ”?</option>
                        <option value="hint_04">ê°€ì¥ ê¸°ì–µì— ë‚¨ëŠ” ì„ ìƒë‹˜ ì„±í•¨ì€?</option>
                        <option value="hint_05">ì¶”ì–µí•˜ê³  ì‹¶ì€ ë‚ ì§œê°€ ìˆë‹¤ë©´?</option>
                        <option value="hint_06">ë‚´ê°€ ì¢‹ì•„í•˜ëŠ” ìºë¦­í„°ëŠ”?</option>
                    </select>
                </span>    
        </div>
        <!-- pw í™•ì¸ ë‹µë³€ -->
        <div id="pwhint_answer">
            <h3 class="join_title"><label for="check_pw_answer">ë¹„ë°€ë²ˆí˜¸ í™•ì¸ ë‹µë³€</label></h3>
            <span class="box int_pw_hint_answer">
                <input type="text" id="check_pw_answer" class="int">
            </span>
        </div>
  
    <!-- ì´ë¦„, ì„±ë³„, ìƒë…„ì›”ì¼, ë³¸ì¸í™•ì¸ ì´ë©”ì¼, íœ´ëŒ€ì „í™”, í‰ìƒíšŒì›ì—¬ë¶€ -->
        <!-- ì´ë¦„ -->
        <div id="join_name">
            <h3 class="join_title"><label for="name">ì´ë¦„</label></h3>
            <span class="box int_name">
                <input type="text" id="input_name" class="int">
            </span>
        </div> 
        <!-- ì„±ë³„ -->
        <div id="join_gender">
            <h3 class="input_title"><label for="gender">ì„±ë³„</label></h3>
            <span class="box radio_box int_gender"> 
                <input type="radio" class="radio_input" name="gender" id="gender_male" value="ë‚¨">
                <label for="gender_male">ë‚¨</label>
                <input type="radio" class="radio_input" name="gender" id="gender_female" value="ì—¬">
                <label for="gender_femal" n>ì—¬</label>
                <input type="radio" class="radio_input" name="gender" id="gender_none" value="ì„ íƒì•ˆí•¨">
                <label for="gender_none">ì„ íƒì•ˆí•¨</label>
            </span>
        </div>
        <!-- ìƒë…„ì›”ì¼ -->
        <div id="join_birth">
            <h3 class="input_title"><label for="birth">ìƒë…„ì›”ì¼</label></h3>
            <div class="bir_wrap">
                <!-- ìƒë…„ -->
                <div class="bir_yy">
                    <span class="box">
                        <input type="text" id="yy" class="int" placeholder="ë…„(4ì)" maxlength="4">
                    </span>
                </div>
                <!-- ì›” -->
                <div class="bir_mm">
                    <span class="box">
                        <select id="mm" class="sel">
                            <option value="month_choice">ì›”</option>
                            <option value="month1">1</option>
                            <option value="month2">2</option>
                            <option value="month3">3</option>
                            <option value="month4">4</option>
                            <option value="month5">5</option>
                            <option value="month6">6</option>
                            <option value="month7">7</option>
                            <option value="month8">8</option>
                            <option value="month9">9</option>
                            <option value="month10">10</option>
                            <option value="month11">11</option>
                            <option value="month12">12</option>
                        </select>
                    </span>
                </div>
                <!-- ì¼ -->
                <div class="bir_dd">
                    <span class="box">
                        <input type="text" id="dd" class="int" maxlength="2" placeholder="ì¼">
                    </span>
                </div>
            </div>
        </div>
        <!-- email -->
        <div id="join_ckemail">
            <h3 class="join_title"><label for="ckemail">ë³¸ì¸ í™•ì¸ ì´ë©”ì¼</label></h3>
            <span class="box int_email">
                <input type="text" id="input_email" class="int">
            </span>
        </div>
        <!-- phone -->
        <div id="join_phone">
            <h3 class="join_title"><label for="phone">íœ´ëŒ€ì „í™”</label></h3>
            <span class="box int_mobile">
                <input type="tel" id="phone" class="int" maxlength="16" placeholder="ì „í™”ë²ˆí˜¸ ì…ë ¥">
            </span>
        </div>
        <!-- í‰ìƒíšŒì› -->
        <div id="lifetime_mem">
            <h3 class="join_title"><label for="lmem">í‰ìƒíšŒì›ì—¬ë¶€</label></h3>
            <span class="box radio_box">
                <input type="radio" name="lifetime_member" id="lifetime_member_yes" value="ë™ì˜">
                <label for="l_mem_yes">ë™ì˜</label>
                <input type="radio" name="lifetime_member" id="lifetime_member_no" value="ë¹„ë™ì˜">
                <label for="l_mem_no">ë¹„ë™ì˜</label>
            </span>
        </div>
        <br>
      </div>
  
    <!-- ê°€ì… ë²„íŠ¼ -->
    <div class="btn_area">
        <button type="submit" id="btnJoin">
            <span>ê°€ì…í•˜ê¸°</span>
        </button>
    </div>
  </form>
  <br><br><br><br><br>
  <script>
    
  alertTxt.classList.add('hide');

  $('#pw').keyup(() => {
    const pwVal = $('#pw').val();

  if($('#pw').val().length == 0){
    alertTxt.classList.add('hide');
    pswd1_img1.src = 'images/member/notpass.png';
    return;
  }
  // ê¸¸ì´ê²€ì‚¬ - ìë¦¿ìˆ˜ëŠ” ê¼­ ^$ê°€ í•„ìš”í•¨!!
  if(!/^.{8,12}$/.test(pwVal)){
    alertTxt.classList.remove('hide');
    pswd1_img1.src = 'images/member/fail.png';
    return;
  }
  // ìˆ«ì í¬í•¨ì—¬ë¶€ (ì•„ë˜ ë‹µ í˜¹ì€ /\d/ë„ ê°€ëŠ¥)
  if(!/[0-9]/.test(pwVal)){
    alertTxt.classList.remove('hide');
    pswd1_img1.src = 'images/member/fail.png';
    return;
  }

  // ì˜ë¬¸ì í¬í•¨ì—¬ë¶€
  if(!/[a-z]/i.test(pwVal)){
    alertTxt.classList.remove('hide');
    pswd1_img1.src = 'images/member/fail.png';
    return;
  }

  // íŠ¹ìˆ˜ë¬¸ì í¬í•¨ì—¬ë¶€(!&/\*@)
  if(!/[!&/\\*@]/.test(pwVal)){
    alertTxt.classList.remove('hide');
    pswd1_img1.src = 'images/member/fail.png';
    return;

  }
  alertTxt.classList.add('hide');
  pswd1_img1.src = 'images/member/pass.png';
    
});

notSamePw.classList.add('hide');

$('#check_pw').keyup(() => {
  
  const ckpw = $('#check_pw').val();
  const pwVal = $('#pw').val();
  
  // console.log(ckpw.length)
  if(ckpw.length == 0){
    notSamePw.classList.add('hide');
    pswd2_img1.src = 'images/member/cknotpass.png'
  }
  if(ckpw == pwVal){
    pswd2_img1.src = 'images/member/ckpass.png'
    notSamePw.classList.add('hide');
  }
  else {
    pswd2_img1.src = 'images/member/cknotpass.png'
    notSamePw.classList.remove('hide');
  }
});

$('#check_pw').blur(() => {
  if($('#check_pw').val().length == 0){
    notSamePw.classList.add('hide');
    pswd2_img1.src = 'images/member/cknotpass.png';
  }
})


document.joinFrm.addEventListener('submit', (e) => {
  const idVal = join_id.value;
  const pwVal = pw.value;
  const ckpwVal = check_pw.value;
  const ckpwHint = pwhint.options[pwhint.selectedIndex].text;
  const hintAnswer = check_pw_answer.value;
  const nameVal = input_name.value; 
  // ì„±ë³„ ê°’ ê°€ì ¸ì˜¤ê¸°
  const gd = document.getElementsByName('gender');
  let genderVal;
  for(let i = 0; i < gd.length; i++){
    if(gd[i].checked){
      genderVal = gd[i].value; 
    }
  }
  const yearVal = yy.value;
  const monthVal = mm.options[mm.selectedIndex].text;
  const dayVal = dd.value;
  const emailVal = input_email.value;
  const phoneVal = phone.value;
  // í‰ìƒíšŒì›ì—¬ë¶€ 
  const lm = document.getElementsByName('lifetime_member');
  let lmVal;
  for(let i = 0; i < lm.length; i++){
    if(lm[i].checked){
      lmVal = lm[i].value; 
    }
  }

  if(!idVal){
    alert('ì•„ì´ë””ë¥¼ ì‘ì„±í•´ì£¼ì„¸ìš”.');
    e.preventDefault();
    return;
  }
  if(!pwVal){
    alert('ë¹„ë°€ë²ˆí˜¸ë¥¼ ì‘ì„±í•´ì£¼ì„¸ìš”.');
    e.preventDefault();
    return;
  }
  if(!ckpwVal){
    alert('ë¹„ë°€ë²ˆí˜¸ í™•ì¸ì„ ì‘ì„±í•´ì£¼ì„¸ìš”.');
    e.preventDefault();
    return;
  }
  if(!hintAnswer){
    alert('ë¹„ë°€ë²ˆí˜¸ í™•ì¸ ë‹µë³€ì„ ì‘ì„±í•´ì£¼ì„¸ìš”.');
    e.preventDefault();
    return;
  }
  if(!nameVal){
    alert('ì´ë¦„ì„ ì‘ì„±í•´ì£¼ì„¸ìš”.');
    e.preventDefault();
    return;
  }
  if(!genderVal){
    alert('ì„±ë³„ì„ ì„ íƒí•´ì£¼ì„¸ìš”');
    e.preventDefault();
    return;
  }
  if(!yearVal || !monthVal || !dayVal){
    alert('ìƒë…„ì›”ì¼ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
    e.preventDefault();
    return;
  }
  if(!emailVal){
    alert('ì´ë©”ì¼ì„ ì‘ì„±í•´ì£¼ì„¸ìš”.');
    e.preventDefault();
    return;
  }
  if(!phoneVal){
    alert('íœ´ëŒ€ì „í™”ë¥¼ ì‘ì„±í•´ì£¼ì„¸ìš”.');
    e.preventDefault();
    return;
  }
  if(!lmVal){
    alert('í‰ìƒíšŒì›ì—¬ë¶€ë¥¼ ì„ íƒí—¤ì£¼ì„¸ìš”.');
    e.preventDefault();
    return;
  }

});

const saveMember = () => {
  const idVal = join_id.value;
  const pwVal = pw.value;
  const ckpwVal = check_pw.value;
  const ckpwHint = pwhint.options[pwhint.selectedIndex].text;
  const hintAnswer = check_pw_answer.value;
  const nameVal = input_name.value; 
  // ì„±ë³„ ê°’ ê°€ì ¸ì˜¤ê¸°
  const gd = document.getElementsByName('gender');
  let genderVal;
  for(let i = 0; i < gd.length; i++){
    if(gd[i].checked){
      genderVal = gd[i].value; 
    }
  }
  const yearVal = yy.value;
  const monthVal = mm.options[mm.selectedIndex].text;
  const dayVal = dd.value;
  const emailVal = input_email.value;
  const phoneVal = phone.value;
  // í‰ìƒíšŒì›ì—¬ë¶€ 
  const lm = document.getElementsByName('lifetime_member');
  let lmVal;
  for(let i = 0; i < lm.length; i++){
    if(lm[i].checked){
      lmVal = lm[i].value; 
    }
  }

  // ë©¤ë²„ ê°ì²´ ìƒì„±
  const mem = new Member(idVal, pwVal, ckpwHint, hintAnswer, nameVal, genderVal, yearVal, monthVal, dayVal, emailVal, phoneVal, lmVal);
  
  // memberbooks ë°°ì—´ ê´€ë¦¬
  const memberbooks = JSON.parse(localStorage.getItem('memberbooks')) || []; // ìˆìœ¼ë©´ ê°€ì ¸ì˜¤ê³  ì—†ìœ¼ë©´ ë§Œë“¤ì–´ë¼
  // console.log(guestbooks);
  memberbooks.push(mem);

  localStorage.setItem('memberbooks', JSON.stringify(memberbooks));

  alert('ê°€ì…ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!');

  // í¼ ì´ˆê¸°í™” 
  document.joinFrm.reset();
  pswd1_img1.src = 'images/member/notpass.png';
  pswd2_img1.src = 'images/member/cknotpass.png'
}

class Member {
  constructor(userId, userPw, pwHint, hintAnswer, userName, userGender, birthYY, birthMM, birthDD, userEmail, userPhone, userLm){
    this.userId = userId;
    this.userPw = userPw;
    this.pwHint = pwHint;
    this.hintAnswer = hintAnswer;
    this.userName = userName;
    this.userGender = userGender;
    this.birthYY = birthYY;
    this.birthMM = birthMM;
    this.birthDD = birthDD;
    this.userEmail = userEmail;
    this.userPhone = userPhone;
    this.userLm = userLm;
  }
}
  </script>
</body>
</html>