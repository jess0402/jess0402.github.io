<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ğŸ‘¨â€ğŸ‘¨â€ğŸ‘§â€ğŸ‘¦íšŒì› ì¡°íšŒ í˜ì´ì§€</title>
<style>
  @font-face {
    font-family: 'YdestreetB';
    src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_2110@1.0/YdestreetB.woff2') format('woff2');
    font-weight: normal;
    font-style: normal;
  }
  @font-face {
    font-family: 'YdestreetL';
    src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_2110@1.0/YdestreetL.woff2') format('woff2');
    font-weight: normal;
    font-style: normal;
  } 
  body {
    display: flex;
    flex-direction: column;
    font-family: 'YdestreetL', sans-serif;
  }
  header {
    display: flex;
    justify-content: space-between;
  }
  header h2 {
    margin: 0 30px;
    font-family: 'YdestreetB', sans-serif;
  }
  header h4 {
    margin: 10px 30px;
    color: gray;
    border: 1px solid gray;
    padding: 5px;
    font-size: 18px;
    cursor: pointer;
    transition: all .2s linear;
  }
  header h4:hover {
    color: white;
    background-color: black;
    transform: scale(1.1);
  }
  table {
    border: 1px solid #000;
    border-collapse: collapse;
    margin: 10px 30px;
  }
  th {
    color: white;
    background-color: black;
  }
  th:not(:last-child) {
    border-right: 1px solid white;
  }
  td {
    border: 1px solid #000;
  }
  </style>
</head>
<body>
  <header>
    <h2>íšŒì› ëª©ë¡ ì¡°íšŒ</h2>
    <h4 id="memberDel">íšŒì› ì‚­ì œ</h4>
  </header>
  <table id="tb-memberbook">
    <thead>
      <tr>
        <th>No</th>
        <th>ì•„ì´ë””</th>
        <th>ë¹„ë°€ë²ˆí˜¸</th>
        <th>ë¹„ë²ˆí™•ì¸ì§ˆë¬¸</th>
        <th>ë¹„ë²ˆí™•ì¸ë‹µë³€</th>
        <th>ì´ë¦„</th>
        <th>ì„±ë³„</th>
        <th>ìƒë…„ì›”ì¼</th>
        <th>ì´ë©”ì¼</th>
        <th>í•¸ë“œí°</th>
        <th>í‰ìƒíšŒì›ì—¬ë¶€</th>
      </tr>
    </thead>
    <tbody>
    </tbody>
  </table>

  <script>
    const memberbooks = JSON.parse(localStorage.getItem('memberbooks'));
    const renderMemberbook = (memberbooks) => {
      const tbody = document.querySelector('#tb-memberbook tbody');
      tbody.innerHTML = "";

      memberbooks.forEach((member, index) => {
        const {userId, userPw, pwHint, hintAnswer, userName, userGender, birthYY, birthMM, birthDD, userEmail, userPhone, userLm} = member;
        const html = `<tr>
            <td>${index + 1}</td>
            <td>${userId}</td>
            <td>${userPw}</td>
            <td>${pwHint}</td>
            <td>${hintAnswer}</td>
            <td>${userName}</td>
            <td>${userGender}</td>
            <td>${birthYY}</td>
            <td>${userEmail}</td>
            <td>${userPhone}</td>
            <td>${userLm}</td>
          </tr>`;
          tbody.innerHTML += html; 
      });
    }

    renderMemberbook(memberbooks);

    memberDel.addEventListener('click', () => {
      const del_id = prompt('ì‚­ì œí•  íšŒì›ì˜ ì•„ì´ë””ë¥¼ ì…ë ¥í•˜ì„¸ìš”.');
      const mm = JSON.parse(localStorage.getItem('memberbooks'));
      console.log('ì‚­ì œì „: ', mm);
      let idx;

      for(let i = 0; i < mm.length; i++){
        // console.log(mm[i]);
        if(mm[i].userId === del_id){
          idx = i;
          console.log(i);
        }
      }
      mm.splice(idx, 1);

      localStorage.setItem('memberbooks', JSON.stringify(mm));

      const tbody = document.querySelector('#tb-memberbook tbody');
      tbody.innerHTML = "";

      const memberbooks = JSON.parse(localStorage.getItem('memberbooks'));
      renderMemberbook(memberbooks);

      alert('íšŒì› ì‚­ì œê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!');

    });
  </script>
</body>
</html>